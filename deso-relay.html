<!doctype html>
<html>
  <head><meta charset="utf-8"><title>DeSo Relay</title></head>
  <body>
    <script>
      (function () {
        try {
          var u = new URL(location.href);
          var redirect = u.searchParams.get('redirect');
          if (!redirect) throw new Error('Missing redirect');

          // Preuzmi SVE parametre koje je Identity dodao, osim na≈°eg "redirect"
          var params = new URLSearchParams(u.search);
          params.delete('redirect'); // ostave se npr. derivedSeedHex, publicKeyBase58Check, ...

          var target = decodeURIComponent(redirect);
          var qs = params.toString();
          if (qs) target += (target.includes('?') ? '&' : '?') + qs;

          // Odmah natrag u app:
          location.replace(target);
        } catch (e) {
          document.body.innerText = 'Relay error: ' + (e && e.message ? e.message : e);
        }
      })();
    </script>
  </body>
</html>
